RewriteEngine on
RewriteCond %{HTTPS}  !=on
RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]

RewriteRule .* - [E=noabort:1]
RewriteRule .* - [E=noconntimeout:1]

# Рдирект на URL без www
RewriteCond %{HTTP_HOST} ^www\. [NC]
RewriteCond %{HTTP_HOST} ^(?:www\.)?(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [L,NE,R=301]

#если в адресе admin/, т перенаправляем а скрипт админки
RewriteRule ^admin/favicon\.ico$ favicon.ico [L]
RewriteCond %{REQUEST_URI} ^/admin/
RewriteRule . admin.php [L]

#если в адресе api/, т перенаправляем а скрипт api
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule . api.php [L]

# Если апрашивамая в URL директоря или фйл существуют обащаемся к нм напрямую
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Если нет - перенаправляем зпрос на index.php
RewriteRule . index.php

<IfModule headers_module>
# Header set X-Frame-Options: "DENY"
</IfModule>
